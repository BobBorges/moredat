<h2>VIDNAR App</h2>

    <p>This app is for the creation and display of video-based elicitation tasks.</p>

    
	<h3>Rationale</h3>

        <p>Translation of longer stretches of text is generally not an acceptable method in language documentation due to translation effects. Instead it is preferable in most instances to elicit longer stretches of text with non-verbal stimuli such as video and images. This app allows for the creation of video-based elicitation tasks.</p>

    

    
	<h3>How it works</h3>

        <p>In the VIDNAR app, sets of video stimuli are defined and assigned as tasks to research participants. Participants are shown video stimuli in sequence and they should narrate the events of each video stimulus as it plays. Their voice is recordedand audio responses are saved in the media/recorded-audio directory.</p>



    
    <h3>Components</h3>

	    <h4>Models</h4>

            <ul>

                <li><span class="code">VidnarVideo()</span></li>   

                    <p>This model creates a database instance for individual videos. It has fields for "filename", "sort_order" (numerical value for sorting vids in a VideoSet), "description", and "source". <span class="code">VidnarVideo</span> objects are for creating <span class="code">VidnarVideoSet</span>  objects.</p>


                <li><span class="code">VidnarVideoSet()</span></li>   

                    <p><span class="code">VidnarVideoSet</span> objects form the basis of Tasks. The fields are as follows: "name", "slug", "videos" (Associates to <span class="code">VidnarVideo</span> objects), "description", "target_language" (L1 or L2 from the ResearchGroup), and "special_instructions" related to a given video set task.</p>

            </ul>   
    


    
	    <h4>Views and Templates</h4>

            <ul>

                <li><span class="code">vidnar_home()</span></li>   

                    <p>This View renders a list of all available video narration tasks that have been created. In production, it probably shouldn't be available to non-admin users.</p>

    
                <li><span class="code">vidnar_welcome()</span></li>   

                    <p>This View displays general info and instructions about a given vidnar task; this includes general instructions, special instructoins from the <span class="code">VidnarVideoSet</span> model instance, and a link to the <span class="code">testuseraudio</span> app. Users begin a task from this view. Admin users also see a list of <span class="code">VidnarVideo</span> objects associated with the task.</p>


                <li><span class="code">vidnar_trial()</span></li>   

                    <p>This view is responsible for the progression of videos in a set â€“ it renders the current <span class="code">VidnarVideo</span> object, <span class="code">User</span> object, and the next video number (if exists) as context variables in the <span class="code">vidnar-trial. Playing the actual video file, recording the user response, and sending data are handled by Javascript <span class="code">static/vidnar/vidnar-trial.js</span>.</p>


                <li><span class="code">vidnar_finish()</span></li>   

                    <p>This View renders a single form <span class="code">VidnarFinishForm</span>  after the user has completed all trials in a vidnar task. Submitting the form marks the Task complete for that user.</p>


                <li><span class="code">save_trial_data()</span></li>   

                    <p>This View doesn't actually display anything, bur accepts data for each trial from the functions at <span class="code">static/vidnar/vidnar-trial.js</span>. It saves an audio file for each trial in <span class="code">media/recorded-audio/</span> with transparent encoding of the user, user's research group, task, trial and timestamp.</p>

            </ul>   
    


    
    	<h4>Forms</h4>

            <ul>

                <li><span class="code">VidnarFinishForm()</span></li>

                    <p>The form has a single boolean field and is rendered with hidden widget in the <span class="code">vidnar-finish.html</span> template by the <span class="code">vidnar_finish()</span> View function.</p>
    
            </ul>   
    


    
        <h4>URLs</h4>

            <p>URL names are transparently linked to the View functions by naming conventions. There are two URL variables <span class="code">vid_set</span> and <span class="code">vidnr</span> which are responsible for rendering model data relating to video sets and videos, respectively</p> 




        <h4>Static files</h4>

            <p>The <span class="code">vidnar</span> app contains functional static files. These are:

                <ul>

                    <li><span class="code">static/vidnar/vidnar-trial.js</span></li>

                        <p>This code handles playing individual videos, recording the user's response, and sending audio data to the <span class="code">save_trial_data()</span> view function.</p>


                    <li><span class="code">static/vidnar/vidnar-welcome.js</span></li>

                        <p>This code prevents users from begining a vidnar task without first opening the <span class="code">testuseraudio</span> app. We want users to make sure their microphone and speakers are functional</p>


                    <li><span class="code">static/vidnar/cues/</span></li>

                        <p>This direcrory contains loading animation, focus dot, and language cues (named by the short 3-letter code from the ResearchGroup model instance.</p>


                    <li><span class="code">static/vidnar/vid/</span></li>

                        <p>Actual video files go here. For consistency, vids should be in mp4 format.</p>

                </ul>

            There's also a bonus shell script  (requres a Unix system or WSL and ffmpeg to be installed on the $PATH environment) to convert videos in the <span class="code">static/vidnar/vid/</span> to mp4 format.</p>  
    



        <h4>Management commands</h4>

            <ul>

                <li><span class="code">import-vid-set</span></li>

                    <p>Allows to the researcher to import a video set from an <span class="code">.ods</span> spreadsheet instead of creating these one object instance at a time in the admin panel. The <span class="code">vidnar/img-set-ODS/</span> directory provides examples of how the speadsheet should be structured before using this command.</p>

                    <p>Set the video set slanguage to "other_language" / L2 with the <span class="code">-o</span> flag.</p>

            </ul>      


        
    <h3>Customizations</h3>

